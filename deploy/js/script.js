function loadData(){$.getJSON("data.json",function(e,t){systems=e.systems;for(var s=0;s<systems.length;s++)$(".system-select").append('<option value="'+systems[s].name+'">'+systems[s].fullname+"</option>")})}function getSystemByName(e){for(var t=0;t<systems.length;t++)if(systems[t].name==e)return systems[t]}function isDuplicate(e){for(var t=0;t<addedSystems.length;t++)if(addedSystems[t].name==e)return!0;return!1}function addSystem(e){$(".download-button").css("display","block"),$(".added-systems-title").css("display","block"),isDuplicate(e.name)||addedSystems.push(e),$(".added-systems").children().remove();for(var t=0;t<addedSystems.length;t++)$(".added-systems").append("<li>"+addedSystems[t].fullname+"</li>")}function generateXML(){XML="<systemList>\n";for(var e=0;e<addedSystems.length;e++){var t=addedSystems[e];XML+="\t<system>\n",XML+="\t\t<name>"+t.name+"</name>\n",XML+="\t\t<fullname>"+t.fullname+"</fullname>\n",XML+="\t\t<path>"+t.path+"</path>\n",XML+="\t\t<extension>"+t.extension+"</extension>\n",XML+="\t\t<command>"+t.command+"</command>\n",XML+="\t\t<platform>"+t.platform+"</platform>\n",XML+="\t\t<theme>"+t.theme+"</theme>\n",XML+="\t</system>\n"}XML+="</systemList>";var s=new Blob([XML],{type:"text/plain;charset=utf-8"});saveAs(s,"es_systems.cfg")}var systems,addedSystems=[],selectedSystem,XML;$(function(){loadData(),$(".path-help-button").click(function(e){$(".path-help").slideToggle()}),$(".command-help-button").click(function(e){$(".command-help").slideToggle()}),$(".system-select").change(function(e){"none"!=$(this).val()&&(selectedSystem=getSystemByName($(this).val()),$("#path").attr("placeholder","Path to "+selectedSystem.name+" roms"))}),$("#system-form").submit(function(e){e.preventDefault(),"none"!=$(".system-select").val()&&(selectedSystem.path=$("#path").val(),selectedSystem.command=$("#command").val(),$("#path").val(""),$("#command").val(""),addSystem(selectedSystem))}),$(".download-button").click(function(e){generateXML()})});